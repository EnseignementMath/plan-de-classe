<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Plan de classe ajusté</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    h1 { text-align: center; margin-bottom: 30px; }
    .cases { display: flex; flex-direction: column; gap: 18px; }
    .case-container {
      display: inline-flex; /* ! clé ! */
      background: #87CEEB;
      border-radius: 5px;
      overflow: hidden;
      margin-bottom: 4px;
      gap: 0px;
    }
    .subcase {
      /* flex: 1;  <-- Surtout PAS ! */
      padding: 8px 14px;
      border-right: 1px solid rgba(255,255,255,.7);
      cursor: pointer;
      transition: background-color .3s, color .3s;
      width: fit-content;          /* S’ajuste au contenu */
      max-width: 300px;
      min-width: 40px;
      word-break: break-word;
      white-space: nowrap;         /* NE PAS couper le prénom, sauf très long */
      display: flex;
      align-items: center;
      justify-content: center;
      background: inherit;
      box-sizing: border-box;
    }
    .subcase:last-child { border-right: none; }
    .subcase.selected { background: #006400; color: #fff; }
    .header { display: flex; align-items: center; gap: 6px; }
    .toggle { cursor: pointer; }
    .title { font-weight: bold; font-size: 1.2em; word-break: break-word; }
    .subcase:empty, .title:empty { display: none !important; }
  </style>
</head>
<body>

<h1>Plan de classe interactif</h1>
<div class="cases" id="cases"></div>

<script>
const matrice = [
  ["AÏT BOUAOUNE Aya", "Roua"],
  ["Mohamed", "Maryam"],
  ["Merve", "Néhémie"],
  ["Nemaaly", "Théo"],
  ["Mathys", "Sheldon"],
  ["Inahya", "Sam Ismaël"],
  ["Aissa", "Carlos"],
  ["Malone", "Raphaël"],
  ["Nour", "Jilyan"],
  ["Ismael", "Inès"]
];

function genererPlan() {
  const casesEl = document.getElementById('cases');
  casesEl.innerHTML = '';
  let num = 1;
  matrice.forEach(ligne => {
    const cont = document.createElement('div');
    cont.className = 'case-container';
    ligne.forEach(prenom => {
      if (!prenom) return;
      const sc = document.createElement('div');
      sc.className = 'subcase';
      sc.dataset.case = num;

      // Titre AVEC le prénom
      const header = document.createElement('div');
      header.className = 'header';
      const toggle = document.createElement('input');
      toggle.type = 'checkbox';
      toggle.className = 'toggle';
      toggle.dataset.case = num;
      const title = document.createElement('span');
      title.className = 'title';
      title.textContent = prenom;
      header.append(toggle, title);
      sc.append(header);

      cont.append(sc);
      num++;
    });
    casesEl.append(cont);
  });

  // Sélection de présence
  document.querySelectorAll('.subcase').forEach(sc => {
    sc.addEventListener('click', e => {
      if (e.target.tagName === 'INPUT') return;
      sc.classList.toggle('selected');
    });
  });
}

genererPlan();
</script>

</body>
</html>
