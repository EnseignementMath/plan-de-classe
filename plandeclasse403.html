<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Plan de classe interactif</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    h1 { text-align: center; margin-bottom: 30px; }
    .container { display: flex; gap: 20px; align-items: flex-start; }

    /* Zone liste élèves */
    #input-eleves { font-size: 1.1em; margin-bottom: 5px; }
    button { margin-left: 8px; font-size: 1.1em; }

    /* Grille */
    .cases {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }
    .case-container {
      display: flex; background-color: #87CEEB;
      border-radius: 5px; overflow: hidden; margin-bottom: 0px;
    }
    .subcase {
      flex: 1;
      padding: 8px;
      border-right: 1px solid rgba(255,255,255,.7);
      cursor: pointer;
      transition: background-color .3s, color .3s;
      min-width: 120px;
      width: fit-content;
      max-width: 260px;
      word-break: break-word;
      white-space: normal;
      display: flex;
      align-items: center;
      justify-content: center;
      background: inherit;
    }
    .subcase:last-child { border-right: none; }
    .subcase.selected { background: #006400; color: #fff; }
    .header { display: flex; align-items: center; gap: 6px; }
    .toggle { cursor: pointer; }
    .title { font-weight: bold; font-size: 1.2em; word-break: break-word; }

    /* Pour masquage des cases vides éventuelles */
    .subcase:empty, .title:empty { display: none !important; }
  </style>
</head>
<body>

<h1>Plan de classe interactif</h1>

<div style="margin-bottom:20px;">
  <label>Colle ta liste d’élèves :<br>
    <small>(Chaque ligne = une rangée, prénoms/prénoms séparés par espace ou tabulation)</small>
  </label><br>
  <textarea id="input-eleves" rows="5" cols="40" placeholder="ex :&#10;Ninon Rudy&#10;Estelle Marc"></textarea>
  <button onclick="genererPlan()">Générer le plan</button>
</div>

<div class="cases" id="cases"></div>

<script>
function genererPlan() {
  // Lire le contenu du textarea
  const texte = document.getElementById('input-eleves').value.trim();
  if (!texte) {
    document.getElementById('cases').innerHTML = "";
    return;
  }
  // Nettoyer la grille précédente
  document.getElementById('cases').innerHTML = "";

  // On sépare les lignes
  const lignes = texte.split('\n').map(l => l.trim()).filter(l => l.length > 0);
  // Pour chaque ligne, on sépare les prénoms (par espace ou tabulation)
  const plan = lignes.map(l => l.split(/\s+|\t+/));

  let num = 1;
  plan.forEach(ligne => {
    const cont = document.createElement('div');
    cont.className = 'case-container';
    ligne.forEach(prenom => {
      if (!prenom) return; // Ne crée pas de case vide
      const sc = document.createElement('div');
      sc.className = 'subcase';
      sc.dataset.case = num;

      // entête AVEC le prénom (jamais "Case X")
      const header = document.createElement('div');
      header.className = 'header';
      const toggle = document.createElement('input');
      toggle.type = 'checkbox';
      toggle.className = 'toggle';
      toggle.dataset.case = num;
      const title = document.createElement('span');
      title.className = 'title';
      title.textContent = prenom;
      header.append(toggle, title);
      sc.append(header);

      cont.append(sc);
      num++;
    });
    document.getElementById('cases').append(cont);
  });

  // Ajoute la sélection de présence
  document.querySelectorAll('.subcase').forEach(sc => {
    sc.addEventListener('click', e => {
      if (e.target.tagName === 'INPUT') return;
      sc.classList.toggle('selected');
    });
  });
}

// Exemple de plan affiché au chargement :
document.addEventListener('DOMContentLoaded', function() {
  document.getElementById('input-eleves').value = `AÏT_BOUAOUNE_Aya Roua
Mohamed Maryam
Merve Néhémie
Nemaaly Théo
Mathys Sheldon
Inahya Sam_Ismaël
Aissa Carlos
Malone Raphaël
Nour Jilyan
Ismael Inès`;
  genererPlan();
});
</script>

</body>
</html>
